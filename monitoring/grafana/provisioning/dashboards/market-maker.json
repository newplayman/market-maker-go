{
  "title": "Market Maker Overview",
  "uid": "market-maker-overview",
  "schemaVersion": 38,
  "version": 1,
  "editable": true,
  "style": "dark",
  "tags": ["runner", "market-maker"],
  "timezone": "",
  "refresh": "5s",
  "panels": [
    {
      "type": "timeseries",
      "title": "Mid/Bid/Ask",
      "datasource": "Prometheus",
      "gridPos": {"x": 0, "y": 0, "w": 12, "h": 8},
      "targets": [
        {"expr": "mm_mid_price{symbol=\"ETHUSDC\"}", "legendFormat": "Mid", "refId": "A"},
        {"expr": "mm_bid_price{symbol=\"ETHUSDC\"}", "legendFormat": "Bid", "refId": "B"},
        {"expr": "mm_ask_price{symbol=\"ETHUSDC\"}", "legendFormat": "Ask", "refId": "C"}
      ]
    },
    {
      "type": "timeseries",
      "title": "Position & Pending Exposure",
      "datasource": "Prometheus",
      "gridPos": {"x": 12, "y": 0, "w": 12, "h": 8},
      "targets": [
        {"expr": "mm_position{symbol=\"ETHUSDC\"}", "legendFormat": "Net Position", "refId": "A"},
        {"expr": "mm_pending_exposure{symbol=\"ETHUSDC\",side=\"buy\"}", "legendFormat": "Pending Buys", "refId": "B"},
        {"expr": "mm_pending_exposure{symbol=\"ETHUSDC\",side=\"sell\"}", "legendFormat": "Pending Sells", "refId": "C"}
      ]
    },
    {
      "type": "timeseries",
      "title": "Worst-Case Exposure",
      "datasource": "Prometheus",
      "gridPos": {"x": 0, "y": 8, "w": 12, "h": 8},
      "targets": [
        {"expr": "mm_worst_case_long", "legendFormat": "Worst Long", "refId": "A"},
        {"expr": "mm_worst_case_short", "legendFormat": "Worst Short", "refId": "B"}
      ]
    },
    {
      "type": "timeseries",
      "title": "Risk & Connectivity",
      "datasource": "Prometheus",
      "gridPos": {"x": 12, "y": 8, "w": 12, "h": 8},
      "targets": [
        {"expr": "mm_runner_risk_state{symbol=\"ETHUSDC\"}", "legendFormat": "Risk State", "refId": "A"},
        {"expr": "mm_ws_connected", "legendFormat": "WS Connected", "refId": "B"},
        {"expr": "mm_quote_suppressed", "legendFormat": "Quote Suppressed", "refId": "C"}
      ]
    },
    {
      "type": "stat",
      "title": "Forced Reduce-Only",
      "datasource": "Prometheus",
      "gridPos": {"x": 0, "y": 16, "w": 6, "h": 6},
      "targets": [
        {"expr": "increase(mm_reduce_only_force_total{symbol=\"ETHUSDC\"}[5m])", "refId": "A"}
      ],
      "options": {"reduceOptions": {"calcs": ["lastNotNull"], "values": false}}
    },
    {
      "type": "stat",
      "title": "Grinding Activity",
      "datasource": "Prometheus",
      "gridPos": {"x": 6, "y": 16, "w": 6, "h": 6},
      "targets": [
        {"expr": "increase(mm_grind_count_total[5m])", "refId": "A"}
      ],
      "options": {"reduceOptions": {"calcs": ["lastNotNull"], "values": false}}
    },
    {
      "type": "timeseries",
      "title": "Funding & Price StdDev",
      "datasource": "Prometheus",
      "gridPos": {"x": 12, "y": 16, "w": 12, "h": 6},
      "targets": [
        {"expr": "mm_predicted_funding_rate", "legendFormat": "Funding", "refId": "A"},
        {"expr": "mm_price_stddev_30m", "legendFormat": "StdDev", "refId": "B"}
      ]
    }
  ]
}
